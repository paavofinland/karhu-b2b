(()=>{"use strict";function e(e=document.body,t="js-"){const n=[...e.querySelectorAll(t?`[class*="${t}"]`:"*")],i=t?"classList":"dataset";return n.reduce(((e,n)=>([].slice.call(t?n[i]:Object.entries(n[i])).forEach((i=>{let o;t&&i.slice(0,t.length)===t?o=i.slice(t.length,i.length):t||([o]=i),o&&(e[o]=e.hasOwnProperty(o)?e[o].constructor===Array?e[o].concat(n):[e[o],n]:n)})),e)),{})}const t=window.component((async t=>{const{mainImageSlider:n,subImageSlider:i,colorSlider:o,colorSlide:r,mainSlide:a,prev:s,next:d,colorPrev:c,colorNext:l}=e(t,null);if(await(u="Swiper",new Promise((e=>{window?.hasLoaded?.scripts?.[u]?e():window.app.on(`${u}:loaded`,e)}))),a.length>1){const e=new Swiper(i,{slidesPerView:"auto",watchSlidesProgress:!0}),t=new Swiper(n,{thumbs:{swiper:e}});s.addEventListener("click",(()=>t.slidePrev())),d.addEventListener("click",(()=>t.slideNext()))}var u;if(r.length>4){const e=new Swiper(o,{slidesPerView:"auto",spaceBetween:0,breakpoints:{1024:{touchStartForcePreventDefault:!0,touchMoveStopPropagation:!0,allowTouchMove:!1}}});c.addEventListener("click",(()=>{e.slidePrev(),0===e.activeIndex&&c.classList.remove("lg:block"),l.classList.add("lg:block")})),l.addEventListener("click",(()=>{e.slideNext(),r.length-e.activeIndex==4&&l.classList.remove("lg:block"),c.classList.add("lg:block")})),l.classList.add("lg:block")}}));const n=e=>e.split(".").reduce(((e,t)=>e?.[t]),window?.Phill?.theme?.strings)||`Missing translation for ${e} in window.Phill`,i={productData:t,productForm:window.component(((t,i)=>{const{submit:o}=e(t,null);let r={};i.on("variant:change",((e,t)=>{r=t,o.textContent=n(t.available?"product.add_to_cart":"product.sold_out"),o.disabled=!t.available})),t.addEventListener("submit",(e=>{e.preventDefault(),o.disabled=!0,o.textContent=n("product.adding_to_cart"),function(e,t,n={}){return function(e=[]){return window.app.emit("cart:updating"),fetch(`${window.Phill.routes.cartAdd}.js`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})}).then((e=>e.json())).then((async e=>{if(e.status)return window.app.emit(["cart:updated","cart:error"],null,e),{item:e,cart:window.app.getState().cart,error:e?.description};const[t,n]=await Promise.all([fetch(`${window.Phill.routes.cart}.js`,{method:"GET",credentials:"include"}).then((e=>e.json())),fetch(`${window.Phill.routes.cart}?sections=cart-drawer`,{method:"GET",credentials:"include"}).then((e=>e.json()))]);return t.sections=n,window.app.emit(["cart:updated","cart:render"],{cart:t}),{item:e,cart:t}}))}([{id:e.id,quantity:t,properties:n}])}(r,t.elements.quantity.value).then((({error:e})=>{e&&alert(e),o.disabled=!0,o.textContent=n("product.added_to_cart"),setTimeout((()=>{e||i.emit("cart:toggle",{cartOpen:!0})}),0),setTimeout((()=>{o.disabled=!1,o.textContent=n("product.add_to_cart")}),e?0:1e3)}))}))}))};window.app.add(i),window.app.mount()})();