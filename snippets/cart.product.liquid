<div class='flex justify-between gap-4 lg:gap-[60px] py-3 lg:py-5 border-b border-b-grey-5 first-of-type:border-t first-of-type:border-t-grey-5'>
  <div class='min-w-[62px] lg:min-w-[120px] w-min bg-grey-6 aspect-square'>
    {%- if item.image -%}
      {%- render 'component.image',
        img: item.image,
        class: 'aspect-square object-contain mix-blend-darken'
      -%}
    {%- else -%}
      <img class='aspect-square object-contain mix-blend-darken' data-image-elem>
    {%- endif -%}
  </div>
  {%- comment -%} TODO: update prices, quantity for share functionality {%- endcomment -%}
  <div
    class='w-[fill-available] lg:self-center'
    data-item
    data-product-id='{{- item.product_id -}}'
  >
    {%- unless shared -%}
      {%- for line_item in product_variants -%}
        <input
          data-variant
          name='{{- line_item.id -}}'
          type='hidden'
          value='{{- line_item.quantity -}}'
        >
      {%- endfor -%}
    {%- endunless -%}
    <div class='flex justify-between'>
      <p
        data-title-elem
        title='{%- if item.product.title -%}{{- item.product.title -}}{%- endif -%}'
        class='max-w-[190px] lg:max-w-[420px] mr-4 truncate'
      >
        {%- if item.product.title -%}
          {{- item.product.title -}}
        {%- endif -%}
      </p>
      <p data-price-elem>
        {%- if item.price -%}
          {{- item.price | money -}}
        {%- endif -%}
      </p>
    </div>
    <div class='flex justify-between mt-1 lg:mt-2'>
      <div data-quantity-container class='grid grid-cols-2 lg:grid-cols-4 gap-2 lg:gap-3'>
        {%- for line_item in product_variants -%}
          {%- render 'cart.quantity', item: line_item -%}
        {%- endfor -%}
      </div>
      {%- unless shared -%}
        <div>
          <button
            data-edit-item-btn
            data-id='{{- item.product_id -}}'
            class='ml-auto underline block mb-1 lg:mb-2'
          >
            {{- 'cart.product_item.edit' | t -}}
          </button>
          <button data-remove-item-btn data-id='{{- item.product_id -}}' class='ml-auto underline'>
            {{- 'cart.product_item.remove' | t -}}
          </button>
        </div>
      {%- endunless -%}
    </div>
  </div>
  <template data-quantity-template>
    {%- render 'cart.quantity' -%}
  </template>
  {%- if shared -%}
    <template data-product-shared-data-template>
      <input data-input-id type='hidden' name='items[][id]'>
      <input data-input-quantity type='hidden' name='items[][quantity]'>
      {%- render 'cart.quantity' -%}
    </template>
  {%- endif -%}
</div>
