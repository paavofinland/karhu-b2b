(()=>{"use strict";const e={collectionFilter:window.component(((e,t)=>{const n=e,r={name:"main-collection",grid:"[data-product-grid]",loading:"[data-filter-loading]",controls:"[data-filter-controls]",selectedFilters:"[data-fiter-selected]"};n.querySelector(r.controls).addEventListener("input",((e,t=300)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout((()=>{e.apply(void 0,r)}),t)}})((e=>((e,t)=>{e.preventDefault();(async(e,t)=>{window.app.emit(["filter:loading"]);const n=await(async e=>fetch(e).then((e=>e.text())).then((e=>(new DOMParser).parseFromString(e,"text/html"))))(`${window.location.origin+window.location.pathname}?section_id=${t.name}&${e}`);window.app.emit(["filter:render"],{html:n,uri:e})})(new URLSearchParams(new FormData(e.target.closest("form"))).toString(),t)})(e,r))));const o=e=>{n.querySelector(r.loading).style.opacity=e?1:0};t.on("filter:render",(({html:e,uri:t})=>{var o;n.querySelector(r.grid).innerHTML=e.querySelector(r.grid).innerHTML,n.querySelector(r.controls).innerHTML=e.querySelector(r.controls).innerHTML,n.querySelector(r.selectedFilters).innerHTML=e.querySelector(r.selectedFilters).innerHTML,o=t,history.pushState({searchParams:o},"",`${window.location.pathname}${o.includes("?")?o:"?".concat(o)}`),window.app.mount(),window.app.emit(["filter:loaded"])})),t.on("filter:loading",(()=>o(!0))),t.on("filter:loaded",(()=>o(!1)))}))};window.app.add(e),window.app.mount()})();