{%- comment -%}
  Expected behaviour:
    Renders the product item

  About:
    Render the product item with default styling.

  Accepts:
    - product: {Object} The product object

  Usage:
    {% render 'component.product', product: product %}
{%- endcomment -%}

<div class='relative'>
  <a href='{{- product.url -}}' class='block w-full pt-[100%] bg-grey-6 relative'>
    {%- if product.featured_image -%}
      <div class='absolute inset-0 w-full h-full flex justify-center items-center'>
        {%- render 'component.image',
          img: product.featured_image,
          width: 1024,
          class: 'w-full object-contain max-h-full mix-blend-darken'
        -%}
      </div>
    {%- else -%}
      {%- render 'image-placeholder' -%}
    {%- endif -%}
  </a>
  <div class='flex justify-between gap-2 mt-4'>
    <p class='truncate' title='{{- product.title -}}'>{{- product.title -}}</p>
    <p>
      <span class='{%- if product.compare_at_price -%} text-red-light {%- endif -%}'>
        {{- product.price | money -}}
      </span>
      {%- if product.compare_at_price -%}
        &nbsp;<span class='line-through'>{{- product.compare_at_price | money -}}</span>
      {%- endif -%}
    </p>
  </div>
  <div class='flex justify-between mb-5 text-grey-3'>
    <p>{{- product.metafields.color.value -}}</p>
    <p>{{- product.selected_or_first_available_variant.sku -}}</p>
  </div>
  {%- assign quick_add_data = 'data-quick-add-btn data-id="' | append: product.id | append: '"' -%}
  {%-
    render 'component.button',
    style: 'primary',
    icon: 'add',
    type: 'submit',
    text: 'collections.quick_add',
    class: 'group w-full grid grid-cols-[1fr_22px] items-center is-active:flex is-active:justify-center px-4 is-active:bg-green-dark is-active:border-green-dark is-active:text-white',
    icon_class: 'group-is-active:hidden',
    attributes: quick_add_data,
    success_text: 'cart.general.cart_saved',
    success_text_class: 'hidden group-is-active:inline',
    success_icon: 'check',
    success_icon_class: 'hidden mr-2 group-is-active:inline'
  -%}
  {%- if product.compare_at_price_max > product.price -%}
    <span class='absolute text-detailed top-4 left-4 py-[3.5px] px-3 text-white bg-red-light rounded-[100px]'>
      -
      {{-
        product.compare_at_price_max
        | minus: product.price
        | times: 100
        | divided_by: product.compare_at_price_max
      -}}
      %
    </span>
  {%- endif -%}
</div>
