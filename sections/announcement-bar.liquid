{%- render 'function.multistore' -%}
{%- assign announcement_text = section.settings.announcement_text -%}
{%- assign agent = true -%}

<div class='bg-black text-white flex {% if agent %} justify-center {% else %} justify-between {% endif %} text-detailed py-3 px-5'>
  {%- unless agent -%}
    {%- render 'component.country-switcher',
      currentName: currentName,
      countriesURL: countriesURL,
      countriesName: countriesName,
      class: 'flex-1 hidden md:block'
    -%}
  {%- endunless -%}

  {%- if announcement_text and agent == false -%}
    <p class='flex-1 text-center'>{{- announcement_text | upcase -}}</p>
  {%- endif -%}

  {%- unless agent -%}
    <a href='/' class='flex-1 text-right hidden md:block'>Account</a>
  {%- endunless -%}

  {%- if agent -%}
    <div class='relative max-w-[110px]'>
      <label for='store_switcher' class='hidden'>Customer switcher</label>
      <select class='bg-black appearance-none w-[calc(100%+1rem)] focus-visible:border-black focus-visible:outline-none'>
        <option selected disabled>Select customer</option>
        {%- for country in countriesName -%}
          {%- assign index = forloop.index | minus: 1 -%}
          <option data-url='{{- countriesURL[index] -}}?no-redirect'>
            {{- country -}}
          </option>
        {%- endfor -%}
      </select>
      <span
        class="after:content-[''] after:block after:h-full after:w-full after:bg-[url('icon.select.svg')] after:bg-no-repeat absolute w-4 top-0 bottom-0 -right-4 pointer-events-none"
      ></span>
    </div>
  {%- endif -%}
</div>

{% schema %}
{
  "name": "Announcement bar",
  "settings": [
    {
      "type": "text",
      "id": "announcement_text",
      "label": "Announcement Text"
    }
  ]
}
{% endschema %}
