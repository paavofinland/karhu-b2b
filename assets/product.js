(()=>{"use strict";function e(e=document.body,t){const i=[...e.querySelectorAll(t?`[class*="${t}"]`:"*")],n=t?"classList":"dataset";return i.reduce(((e,i)=>([].slice.call(t?i[n]:Object.entries(i[n])).forEach((n=>{let r;t&&n.slice(0,t.length)===t?r=n.slice(t.length,n.length):t||([r]=n),r&&(e[r]=e.hasOwnProperty(r)?e[r].constructor===Array?e[r].concat(i):[e[r],i]:i)})),e)),{})}const t=e=>e.split(".").reduce(((e,t)=>e?.[t]),window?.Phill?.theme?.strings)||`Missing translation for ${e} in window.Phill`,i=window.component(((i,n)=>{const{submit:r}=e(i,null);let s={};n.on("variant:change",((e,i)=>{s=i,r.textContent=t(i.available?"product.add_to_cart":"product.sold_out"),r.disabled=!i.available})),i.addEventListener("submit",(e=>{e.preventDefault(),r.disabled=!0,r.textContent=t("product.adding_to_cart"),function(e,t,i={}){return function(e=[]){return window.app.emit("cart:updating"),fetch(`${window.Phill.routes.cartAdd}.js`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})}).then((e=>e.json())).then((async e=>{if(e.status)return window.app.emit(["cart:updated","cart:error"],null,e),{item:e,cart:window.app.getState().cart,error:e?.description};const[t,i]=await Promise.all([fetch(`${window.Phill.routes.cart}.js`,{method:"GET",credentials:"include"}).then((e=>e.json())),fetch(`${window.Phill.routes.cart}?sections=cart-drawer`,{method:"GET",credentials:"include"}).then((e=>e.json()))]);return t.sections=i,window.app.emit(["cart:updated","cart:render"],{cart:t}),{item:e,cart:t}}))}([{id:e.id,quantity:t,properties:i}])}(s,i.elements.quantity.value).then((({error:e})=>{e&&alert(e),r.disabled=!0,r.textContent=t("product.added_to_cart"),setTimeout((()=>{e||n.emit("cart:toggle",{cartOpen:!0})}),0),setTimeout((()=>{r.disabled=!1,r.textContent=t("product.add_to_cart")}),e?0:1e3)}))}))})),n=e=>new Promise((t=>{window?.hasLoaded?.scripts?.[e]?t():window.app.on(`${e}:loaded`,t)})),r={productForm:i,productImages:window.component((async t=>{const{slider:i,thumbnailSlider:r,prev:s,next:o}=e(t),{slides:a}=t.dataset;if(!i)return;await n("Swiper");const d={slidesPerView:3.25,watchSlidesProgress:!0,breakpoints:{1024:{slidesPerView:Math.max(Math.min(Number(a),9.5),5)}},on:{beforeInit(e){e.$el.removeClass("is-loading")}}},l=new Swiper(r,d);new Swiper(i,{resizeObserver:!0,thumbs:{swiper:l,multipleActiveThumbs:!1,slideThumbActiveClass:"is-active"},navigation:{nextEl:o,prevEl:s},on:{beforeInit(e){e.$el.removeClass("is-loading")}}})})),productColors:window.component((async t=>{const{slider:i,slide:r,prev:s,next:o}=e(t),a=[].concat(r).length;await n("Swiper"),a>3&&new Swiper(i,{slidesPerView:3.5,spaceBetween:4,on:{beforeInit(e){e.$el.removeClass("is-loading")},navigationNext(e){(e.slides.length-1)/2<=4&&e.slideTo(e.slides.length-1)},navigationPrev(e){(e.slides.length-1)/2<=4&&e.slideTo(0)}},breakpoints:{768:{slidesPerView:5.5},1024:{slidesPerView:4,navigation:{nextEl:o,prevEl:s}}}})}))};window.app.add(r),window.app.mount()})();