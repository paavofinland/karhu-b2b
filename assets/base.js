(()=>{"use strict";const e=e=>new Promise((t=>{window?.hasLoaded?.scripts?.[e]?t():window.app.on(`${e}:loaded`,t)}));function t(e=document.body,t="js-"){const n=[...e.querySelectorAll(t?`[class*="${t}"]`:"*")],o=t?"classList":"dataset";return n.reduce(((e,n)=>([].slice.call(t?n[o]:Object.entries(n[o])).forEach((o=>{let a;t&&o.slice(0,t.length)===t?a=o.slice(t.length,o.length):t||([a]=o),a&&(e[a]=e.hasOwnProperty(a)?e[a].constructor===Array?e[a].concat(n):[e[a],n]:n)})),e)),{})}const n={hero:window.component((async n=>{const{slider:o,slide:a,prev:r,next:s}=t(n,null);if(a.length>1){await e("Swiper");const t=new Swiper(o,{slidesPerView:1,loop:!0,on:{afterInit:e=>{e.wrapperEl.classList.remove("overflow-hidden","flex")}}});r.addEventListener("click",(()=>t.slidePrev())),s.addEventListener("click",(()=>t.slideNext()))}})),categoryOverview:window.component((async n=>{const{slider:o}=t(n,null);return await e("Swiper"),new Swiper(o,{allowTouchMove:!0,direction:"horizontal",slidesPerView:"auto",grabCursor:!0})}))},o=window.component((()=>{document.addEventListener("shopify:section:load",(()=>{window.app.unmount(),window.app.mount()}))})),a=window.component((e=>{const{text:t}=e.dataset;console.log("console:log",t)})),r=window.component(((e,n)=>{const{group:o}=e.dataset,{inner:a,toggle:r}=t(e,null),s="open",c=()=>{e.style.setProperty("--innerHeight","auto"),e.style.setProperty("--innerHeight",`${a.scrollHeight}px`)};c(),window.addEventListener("resize",c,{passive:!0}),r.addEventListener("click",(()=>{n.emit("accordion:toggle",null,{open:!e.classList.contains(s),node:e,group:o})})),n.on("accordion:toggle",((t,n={})=>{o===n.group&&e.classList[n.open&&n.node===e?"add":"remove"](s)}))})),s=window.component((e=>{const{hamburger:n,hamburgerOpened:o,hamburgerClosed:a,mobileMenu:r}=t(e,null),s=document.querySelector("#shopify-section-announcement-bar").offsetHeight||0,c=()=>e.classList[!o.classList.contains("hidden")||window.scrollY>s?"add":"remove"]("is-active");window.addEventListener("scroll",c,{passive:!0}),window.addEventListener("load",c),n.addEventListener("click",(()=>{o.classList.toggle("hidden"),a.classList.toggle("hidden"),document.body.classList.toggle("overflow-hidden"),r.classList.toggle("left-0"),c()}));const i=()=>{r.style.height=window.innerHeight-s-r.parentElement.offsetHeight+"px"};i(),window.addEventListener("resize",i)}));const c=({keyCode:e},{type:t,boolean:n})=>{27===e&&t&&n&&window.app.emit(t,{[n]:!1})},i={sectionRendering:o,consoleLog:a,accordion:r,header:s,cartDrawer:window.component((async(e,n)=>{const o=e.parentNode,a=e,{toggle:r,clear:s,focusEl:i}=t(e,null),d=({cartOpen:t})=>{e.classList[t?"add":"remove"]("open"),t?(a.tabIndex="0",(i||e).focus()):a.tabIndex="-1"};return r.forEach((e=>{e.addEventListener("click",(()=>n.emit("cart:toggle",(({cartOpen:e})=>({cartOpen:!e??!0})))))})),d(n.getState()),s&&s.addEventListener("click",(()=>(window.app.emit("cart:updating"),fetch(`${window.Phill.routes.cartClear}.js`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({sections:"cart-drawer"})}).then((e=>e.json())).then((e=>(window.app.emit(["cart:updated","cart:render"],{cart:e}),e)))))),e.addEventListener("keyup",(e=>c(e,{type:"cart:toggle",boolean:"cartOpen"}))),await n.on("cart:render",(({cart:e})=>{o&&(document.getElementById("shopify-section-cart-drawer").outerHTML=e.sections["cart-drawer"]),window.app.unmount(),window.app.mount()})),n.on("cart:toggle",d),()=>{n.on(["cart:toggle","cart:render"],(()=>{}))(),e.removeEventListener("keyup",(e=>c(e,{type:"cart:toggle",boolean:"cartOpen"})))}})),cartItem:window.component((e=>{const{update:n}=t(e,null),{key:o}=e.dataset;[].concat(n).forEach((e=>{const{value:t}=e.dataset;e.addEventListener("click",(()=>function(e,t){return function(e,t){return window.app.emit("cart:updating"),fetch(`${window.Phill.routes.cartChange}.js`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:t,sections:"cart-drawer"})}).then((e=>e.json())).then((async e=>(window.app.emit(["cart:updated","cart:render"],{cart:e}),e)))}(e,t)}(o,t)))}))})),announcementBar:window.component((async e=>{const{customerSelect:n}=t(e,null),{customerId:o,customerSecret:a,store:r,selectedStoreCustomer:s}=e.dataset;if(!o||!a||!r)return;const c=new URLSearchParams({store:r,customerId:o,secret:a}),i=await fetch(`http://localhost:3000/api/customer/list-agent-stores?${c}`).then((e=>e.json()));i.length?((e=>{const t=document.createDocumentFragment();e.forEach((e=>{const n=document.createElement("option");s===e.id&&n.setAttribute("selected",!0),n.value=e.id,n.innerText=e.name,t.appendChild(n)})),n.appendChild(t)})(i),n.addEventListener("change",(async e=>{c.set("storeCustomerId",e.target.value),fetch(`http://localhost:3000/api/customer/set-selected-store?${c}`).then((()=>window.location.reload()))}))):n.setAttribute("disabled",!0)}))};window.app.add(n),window.app.add(i),window.app.mount()})();