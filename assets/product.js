(()=>{"use strict";function e(e=document.body,t){const n=[...e.querySelectorAll(t?`[class*="${t}"]`:"*")],i=t?"classList":"dataset";return n.reduce(((e,n)=>([].slice.call(t?n[i]:Object.entries(n[i])).forEach((i=>{let o;t&&i.slice(0,t.length)===t?o=i.slice(t.length,i.length):t||([o]=i),o&&(e[o]=e.hasOwnProperty(o)?e[o].constructor===Array?e[o].concat(n):[e[o],n]:n)})),e)),{})}const t=e=>e.split(".").reduce(((e,t)=>e?.[t]),window?.Phill?.theme?.strings)||`Missing translation for ${e} in window.Phill`,n=window.component(((n,i)=>{const{submit:o}=e(n,null);let s={};i.on("variant:change",((e,n)=>{s=n,o.textContent=t(n.available?"product.add_to_cart":"product.sold_out"),o.disabled=!n.available})),n.addEventListener("submit",(e=>{e.preventDefault(),o.disabled=!0,o.textContent=t("product.adding_to_cart"),function(e,t,n={}){return function(e=[]){return window.app.emit("cart:updating"),fetch(`${window.Phill.routes.cartAdd}.js`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})}).then((e=>e.json())).then((async e=>{if(e.status)return window.app.emit(["cart:updated","cart:error"],null,e),{item:e,cart:window.app.getState().cart,error:e?.description};const[t,n]=await Promise.all([fetch(`${window.Phill.routes.cart}.js`,{method:"GET",credentials:"include"}).then((e=>e.json())),fetch(`${window.Phill.routes.cart}?sections=cart-drawer`,{method:"GET",credentials:"include"}).then((e=>e.json()))]);return t.sections=n,window.app.emit(["cart:updated","cart:render"],{cart:t}),{item:e,cart:t}}))}([{id:e.id,quantity:t,properties:n}])}(s,n.elements.quantity.value).then((({error:e})=>{e&&alert(e),o.disabled=!0,o.textContent=t("product.added_to_cart"),setTimeout((()=>{e||i.emit("cart:toggle",{cartOpen:!0})}),0),setTimeout((()=>{o.disabled=!1,o.textContent=t("product.add_to_cart")}),e?0:1e3)}))}))})),i=e=>new Promise((t=>{window?.hasLoaded?.scripts?.[e]?t():window.app.on(`${e}:loaded`,t)})),o={productForm:n,productImages:window.component((async t=>{const{slider:n,thumbnailSlider:o,prev:s,next:r}=e(t),{slides:a}=t.dataset;if(!n)return;await i("Swiper");const d={slidesPerView:3.25,watchSlidesProgress:!0,breakpoints:{1024:{slidesPerView:Math.max(Math.min(Number(a),9.5),5)}},on:{beforeInit(e){e.$el.removeClass("is-loading")}}},l=new Swiper(o,d);new Swiper(n,{resizeObserver:!0,thumbs:{swiper:l,multipleActiveThumbs:!1,slideThumbActiveClass:"is-active"},navigation:{nextEl:r,prevEl:s},on:{beforeInit(e){e.$el.removeClass("is-loading")}}})})),productColors:window.component((async t=>{const{slider:n,slide:o,prev:s,next:r}=e(t),a=[].concat(o).length;await i("Swiper"),a>3&&new Swiper(n,{slidesPerView:3.5,spaceBetween:4,on:{beforeInit(e){e.$el.removeClass("is-loading")},navigationNext(e){(e.slides.length-1)/2<=4&&e.slideTo(e.slides.length-1)},navigationPrev(e){(e.slides.length-1)/2<=4&&e.slideTo(0)}},breakpoints:{768:{slidesPerView:5.5},1024:{slidesPerView:4,navigation:{nextEl:r,prevEl:s}}}})})),productSizes:window.component((t=>{const{size:n,sizeButton:i}=e(t),o=[].concat(n).filter(Boolean),s=[].concat(i).filter(Boolean);s.forEach((e=>e.addEventListener("click",(t=>{const n=t.target.textContent.trim().toLowerCase();o.forEach((e=>{e.innerText=e.dataset[n]})),s.forEach((({classList:e})=>e.remove("is-active"))),e.classList.add("is-active")})))),console.log(n)}))};window.app.add(o),window.app.mount()})();